/*!
 * @preserve
 * jquery.scrolldepth.js | v1.0
 * Copyright (c) 2016 Rob Flaherty (@robflaherty)
 * Licensed under the MIT and GPL licenses.
 */
(function(a){if(typeof define==="function"&&define.amd){define(["jquery"],a)}else{if(typeof module==="object"&&module.exports){module.exports=a(require("jquery"))}else{a(jQuery)}}}(function(g){var f={minHeight:0,elements:[],percentage:true,userTiming:true,pixelDepth:true,nonInteraction:true,gaGlobal:false,gtmOverride:false,trackerName:false,dataLayer:"dataLayer"};var b=g(window),a=[],h=false,d=0,c,j,e,i;g.scrollDepth=function(t){var l=+new Date;t=g.extend({},f,t);if(g(document).height()<t.minHeight){return}if(t.gaGlobal){c=true;e=t.gaGlobal}else{if(typeof ga==="function"){c=true;e="ga"}else{if(typeof __gaTracker==="function"){c=true;e="__gaTracker"}}}if(typeof _gaq!=="undefined"&&typeof _gaq.push==="function"){j=true}if(typeof t.eventHandler==="function"){i=t.eventHandler}else{if(typeof window[t.dataLayer]!=="undefined"&&typeof window[t.dataLayer].push==="function"&&!t.gtmOverride){i=function(u){window[t.dataLayer].push(u)}}}function r(x,v,u,w){var y=t.trackerName?(t.trackerName+".send"):"send";if(i){i({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:x,eventLabel:v,eventValue:1,eventNonInteraction:t.nonInteraction});if(t.pixelDepth&&arguments.length>2&&u>d){d=u;i({event:"ScrollDistance",eventCategory:"Scroll Depth",eventAction:"Pixel Depth",eventLabel:m(u),eventValue:1,eventNonInteraction:t.nonInteraction})}if(t.userTiming&&arguments.length>3){i({event:"ScrollTiming",eventCategory:"Scroll Depth",eventAction:x,eventLabel:v,eventTiming:w})}}else{if(c){window[e](y,"event","Scroll Depth",x,v,1,{nonInteraction:t.nonInteraction});if(t.pixelDepth&&arguments.length>2&&u>d){d=u;window[e](y,"event","Scroll Depth","Pixel Depth",m(u),1,{nonInteraction:t.nonInteraction})}if(t.userTiming&&arguments.length>3){window[e](y,"timing","Scroll Depth",x,w,v)}}if(j){_gaq.push(["_trackEvent","Scroll Depth",x,v,1,t.nonInteraction]);if(t.pixelDepth&&arguments.length>2&&u>d){d=u;_gaq.push(["_trackEvent","Scroll Depth","Pixel Depth",m(u),1,t.nonInteraction])}if(t.userTiming&&arguments.length>3){_gaq.push(["_trackTiming","Scroll Depth",x,w,v,100])}}}}function q(u){return{"25%":parseInt(u*0.25,10),"50%":parseInt(u*0.5,10),"75%":parseInt(u*0.75,10),"100%":u-5}}function o(v,u,w){g.each(v,function(x,y){if(g.inArray(x,a)===-1&&u>=y){r("Percentage",x,u,w);a.push(x)}})}function n(w,u,v){g.each(w,function(x,y){if(g.inArray(y,a)===-1&&g(y).length){if(u>=g(y).offset().top){r("Elements",y,u,v);a.push(y)}}})}function m(u){return(Math.floor(u/250)*250).toString()}function s(){k()}g.scrollDepth.reset=function(){a=[];d=0;b.off("scroll.scrollDepth");k()};g.scrollDepth.addElements=function(u){if(typeof u=="undefined"||!g.isArray(u)){return}g.merge(t.elements,u);if(!h){k()}};g.scrollDepth.removeElements=function(u){if(typeof u=="undefined"||!g.isArray(u)){return}g.each(u,function(w,y){var v=g.inArray(y,t.elements);var x=g.inArray(y,a);if(v!=-1){t.elements.splice(v,1)}if(x!=-1){a.splice(x,1)}})};function p(z,B){var x,w,u;var A=null;var y=0;var v=function(){y=new Date;A=null;u=z.apply(x,w)};return function(){var C=new Date;if(!y){y=C}var D=B-(C-y);x=this;w=arguments;if(D<=0){clearTimeout(A);A=null;y=C;u=z.apply(x,w)}else{if(!A){A=setTimeout(v,D)}}return u}}function k(){h=true;b.on("scroll.scrollDepth",p(function(){var w=g(document).height(),v=window.innerHeight?window.innerHeight:b.height(),u=b.scrollTop()+v,x=q(w),y=+new Date-l;if(a.length>=t.elements.length+(t.percentage?4:0)){b.off("scroll.scrollDepth");h=false;return}if(t.elements){n(t.elements,u,y)}if(t.percentage){o(x,u,y)}},500))}s()};return g.scrollDepth}));